(()=>{"use strict";const e="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/l1wyQq7Jrf2t34Tkma8G/likes";class t{constructor(){this.query="https://www.themealdb.com/api/json/v1/1/categories.php"}getRecipies=async()=>{const e=await fetch(`${this.query}`);return this.results=await e.json(),this.results}}const n=document.querySelector(".cards"),i=document.querySelector(".pagination-container"),s=(document.querySelector(".likes"),document.querySelector(".nav-items")),r=(e,t)=>`<button class="pagination" data-goto = ${"prev"===t?e-1:e+1} >\n    <span>Page ${"prev"===t?e-1:e+1}</span>\n${"prev"===t?'<svg xmlns="http://www.w3.org/2000/svg" height="15" width="20" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7" />\n</svg>':'<svg xmlns="http://www.w3.org/2000/svg" height="15" width="20" class="right" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7"/></svg>'}\n\n      </button>`,o=async(t,n)=>{n||await(async t=>(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).status)({item_id:t}),((e,t)=>{const n=e?'<svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />\n                </svg>':'<svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n  <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />\n</svg>';document.querySelector(`#like${t}`).innerHTML=n})(n,t)},a=(e,t,a=1,l=6)=>{(e=>{const t=`<li><a href="#">Recipes (${e})</a></li>\n            <li>Hotels</li>\n            <li>Resturants</li>`;s.innerHTML=t})(e.length);const c=(a-1)*l,d=a*l;e.slice(c,d).forEach((e=>{const i=t.filter((t=>e.idCategory===t.item_id));e.likes=void 0===i||void 0===i[0]?0:i[0].likes,(e=>{const t=`<div class="card" data-id = "${e.idCategory}">\n            <div class="card-image">\n              <img src="${e.strCategoryThumb}" alt="recipe image">\n            </div>\n            <div class="card-text">\n              <div class="card__title">${e.strCategory}</div>\n              <div class="like-btn" data-id="${e.idCategory}" data-liked="false" id="like${e.idCategory}">\n                <svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />\n                </svg>\n              </div>\n            </div>\n            <div class="likes"> ${e.likes} likes </div>\n            <div class="btn-container">\n              <button class="btn seePop-btn">Comments</button>\n            </div>\n          </div>`;n.innerHTML+=t})(e)})),((e,t,n)=>{const s=Math.ceil(t/n);let o;1===e&&s>1?o=r(e,"next"):e<s?o=`${r(e,"prev")}${r(e,"next")}`:e===s&&s>1&&(o=r(e,"prev")),i.insertAdjacentHTML("afterbegin",o)})(a,e.length,l),(()=>{const e=document.getElementsByClassName("like-btn");for(let t=0;t<=e.length-1;t+=1)e[t].addEventListener("click",(()=>{const n=e[t].getAttribute("data-id"),i="true"===e[t].getAttribute("data-liked");i?e[t].setAttribute("data-liked","false"):e[t].setAttribute("data-liked","true"),o(n,i)}))})()},l={};window.addEventListener("load",(async()=>{(async()=>{l.recipe=new t,n.insertAdjacentHTML("afterbegin",'\n          <div class="loader">\n          <svg xmlns="http://www.w3.org/2000/svg" height="45" width="45" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />\n          </svg>\n          </div>\n                  '),await l.recipe.getRecipies(),l.likes=await(async()=>{const t=await fetch(e);return await t.json()})(),(()=>{const e=document.querySelector(".loader");e&&e.parentElement.removeChild(e)})(),a(l.recipe.results.categories,l.likes)})()})),i.addEventListener("click",(e=>{const t=e.target.closest(".pagination");if(t){const e=parseInt(t.dataset.goto,10);n.innerHTML="",i.innerHTML="",a(l.recipe.results.categories,l.likes,e)}}))})();