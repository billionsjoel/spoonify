(()=>{"use strict";class e{constructor(){this.query="https://www.themealdb.com/api/json/v1/1/categories.php"}getRecipies=async()=>{const e=await fetch(`${this.query}`);return this.results=await e.json(),this.results}}const t=document.querySelector(".cards"),n=e=>{const n=`<div class="card" data-id = "${e.idCategory}">\n            <div class="card-image">\n              <img src="${e.strCategoryThumb}" alt="recipe image">\n            </div>\n            <div class="card-text">\n              <div class="card__title">${e.strCategory}</div>\n              <div class="like-btn">\n                <svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />\n                </svg> <span> 6 likes</span>\n              </div>\n            </div>\n            <div class="btn-container">\n              <button class="btn seePop-btn">Comments</button>\n            </div>\n          </div>`;t.innerHTML+=n},s=document.querySelector("#popup"),a=document.querySelector("#header"),i=document.querySelector("#main"),c=document.querySelector("#footer"),o=()=>{a.style.display="block",i.style.display="block",c.style.display="block",s.style.display="none"},r=async e=>{const t=await fetch(`https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/l1wyQq7Jrf2t34Tkma8G/comments?item_id=${e}`);return await t.text()},l=async e=>{const t=await r(e.idCategory)||"",n=JSON.parse(t),s=(e=>e.length)(n),a=document.querySelector("#popup");a.className="comments-popup",a.innerHTML=`<div class="recipe">\n                           <button type="button" class="close-btn clickable">&times;</button>\n                           <div class="recipe__image">\n                             <img src="${e.strCategoryThumb}" alt="recipe image">\n                           </div>\n                           <div class="recipe__text">\n                             <div class="recipe-title">\n                               <h2>${e.strCategory}</h2>\n                             </div>\n                             <div class="details">\n                              <p>${e.strCategoryDescription}</p>\n                             </div>\n                           </div>\n                           <div class="comments">\n                             <div class="comments__title">\n                               <h2>Comments <span>(${s||0})</span></h2>\n                             </div>\n                             <ul class="comments-list">${n.map((e=>`<li class="comment-item"><span>${e.creation_date}</span><span> ${e.username}:</span><span> ${e.comment}</span></li>`)).join("")}\n                             </ul> \n                           </div>\n                           <div class="add-comment">\n                             <h2 class="title">Add a comment</h2>\n                             <div class="new-comment">\n                               <form class="form">\n                                 <input class="input-name" type="text" placeholder="Your Name" required>\n                                 <textarea name="add-comment" id="new-comment" class="comment-msg" cols="30" rows="4" placeholder="Your Comment" required></textarea>\n                                 <button type="submit" class="add-comment-btn clickable">Add Comment</button>\n                               </form>\n                             </div>\n                           </div>\n                         </div>`},d={};window.addEventListener("load",(()=>{(async()=>{d.recipe=new e,await d.recipe.getRecipies(),d.recipe.results.categories.forEach(n),l(d.recipe.results.categories),(async()=>{const e=document.querySelectorAll(".btn"),n=await d.recipe.results.categories;t.insertAdjacentHTML("afterbegin",'\n          <div class="loader">\n          <svg xmlns="http://www.w3.org/2000/svg" height="45" width="45" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />\n          </svg>\n          </div>\n                  '),await d.recipe.getRecipies(),(()=>{const e=document.querySelector(".loader");e&&e.parentElement.removeChild(e)})(),e.forEach((e=>{e.addEventListener("click",(async()=>{a.style.display="none",i.style.display="none",c.style.display="none",s.style.display="block";const t=e.parentNode.parentNode.dataset.id;n.find((e=>e.idCategory===t)),await l(n.find((e=>e.idCategory===t))),document.querySelector(".close-btn").addEventListener("click",o);const d=document.querySelector(".form");d.addEventListener("submit",(e=>{e.preventDefault();const n=document.querySelector(".input-name"),s=document.querySelector(".comment-msg");(async e=>{(await fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/l1wyQq7Jrf2t34Tkma8G/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).text()})({item_id:t,username:n.value,comment:s.value}),d.reset(),r(t)}))}))}))})()})()}))})();